# 第2章-2：Gitによるローカル管理

## 🛠️ 具体的なツールでの実践

前章でバージョン管理システムの基本概念と価値を理解しました。ここからは、**理論から実践へ**と進み、現代のソフトウェア開発で最も広く使われているGitというツールを使った具体的な管理方法を学んでいきます。

## はじめに：CI/CDにおけるGitの位置付け

CI/CDを支える技術群の中でも、**Gitはその出発点となる技術**です。前章で扱ったバージョン管理の基礎を踏まえ、ここでは具体的にGitというツールを用いたローカルでの履歴管理方法について掘り下げます。CI/CDはコードの変更をトリガーに自動化されたビルド・テスト・デプロイを行いますが、その「変更」を正確に検知し、記録・共有するためにはGitの理解が不可欠です。したがって、CI/CDを正しく機能させる前提として、まずはローカル開発におけるGitの使い方とその価値を体系的に理解しておく必要があります。

---

## Gitの基本概念

### Gitとは？

**Git**は、分散型バージョン管理システムの代表格で、ローカル環境で完全な履歴管理が可能です。2005年にLinux Kernelの開発者であるLinus Torvaldsによって開発され、現在では世界中のソフトウェア開発で標準的に使用されています。

### Gitの3つの領域

```
Gitの3つの領域:
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ Working     │    │ Staging     │    │ Repository  │
│ Directory   │───▶│ Area        │───▶│ (.git)      │
│ (作業領域)   │    │ (準備領域)   │    │ (履歴保存)   │
└─────────────┘    └─────────────┘    └─────────────┘
     ↑                    ↑                    ↑
   git add              git commit         git log
```

各領域の役割は以下の通りです：

#### Working Directory（作業ディレクトリ）

* **ファイルの作成・編集・削除を行う場所**
* 作業中のコードはまだ履歴管理下にはなく、一時的な変更状態です

#### Staging Area（ステージングエリア）

* **コミット対象の変更を一時的に保持する中間領域**
* 複数の変更の中から、どの内容を履歴に残すかを選択的に決定できます

#### Repository（リポジトリ）

* **最終的に履歴として保存される領域**（`.git` ディレクトリ内）
* すべてのコミット、ブランチ、タグなどが格納されており、完全なプロジェクト履歴を保持します

---

## Gitのワークフロー：日常的な開発フローの流れと目的

Gitを使用した基本的な開発フローは以下のように進行します：

1. **作業開始（編集）**: 作業ディレクトリでファイルを編集
2. **変更確認**: `git status` で変更状況を確認
3. **ステージング**: `git add` で対象変更をステージングエリアに移動
4. **コミット**: `git commit` で履歴として保存
5. **履歴確認**: `git log` で履歴を確認・追跡

このプロセスを通じて、**作業内容を整理し、バグ発生時の切り戻しや他者との連携が円滑になります**。

---

## ブランチとマージ：安全な並行開発のための手段

Gitの特徴的な機能である「ブランチ」は、**開発中のコードを一時的に本流（mainなど）から分岐させて管理する仕組み**です。

* 機能開発やバグ修正など、異なる作業を独立して進めることができる
* ブランチを統合する「マージ」操作によって、変更内容を本流に反映させる

マージには以下のような実践的価値があります：

* **複数人開発時の衝突を明示的に検知**し、適切に解決できる
* **統合タイミングのコントロール**により、品質を担保した開発が可能

---

## ローカルでの差分確認と変更の管理

変更の可視化や修正の取り消し操作は、日常の開発において非常に重要です。以下のような操作が利用されます：

* `git diff`：作業ディレクトリとステージングエリアの差分確認
* `git restore`：作業中の変更を元に戻す
* `git reset`：ステージングを取り消す、またはコミットを巻き戻す

これらを活用することで、**意図しない変更やミスを未然に防ぐ自己チェックの手段**となります。

---

## Gitの利点（CI/CDとの関係性も含めて）

### 分散型アーキテクチャ

* ネットワーク接続なしでもコミット・ブランチ操作が可能
* 各開発者が完全な履歴を持つことで、**中央サーバ障害時の復旧性が高い**

### 柔軟なブランチ戦略

* 軽量かつ高速なブランチ作成が可能
* 実験的な変更や修正を本流に影響を与えずに進められる

### CI/CDとの接続性

* コミットをトリガーにビルドやテストが自動実行される
* ブランチ単位でCIを分けることで、**品質を担保した段階的なリリース管理**が可能になる

---

## まとめ

Gitは、ローカル開発において履歴の可視化・変更の管理・安全な実験環境の構築を可能にする強力なツールです。その理解は、CI/CDパイプラインを構築する上での前提条件であり、次章で扱う「リモートリポジトリ」との連携によって、さらにその価値が拡張されていきます。
